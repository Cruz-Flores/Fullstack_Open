(this["webpackJsonpfrontend-blogs-app"]=this["webpackJsonpfrontend-blogs-app"]||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(20),c=n.n(a),s=n(1),i=n.n(s),o=n(4),u=n(8),l=n(6),d=n(5),j=n(7),b=n.n(j),p="http://localhost:3001/api/blogs",h=null,m=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(p);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},e.next=3,b.a.post(p,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put("".concat(p,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},e.next=3,b.a.delete("".concat(p,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v={getAll:m,create:O,update:x,remove:f,setToken:function(e){h="bearer ".concat(e)}},g=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("http://localhost:3001/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w={loginBlogs:g},k=n(0),y=function(e){var t=e.createBlog,n=Object(r.useState)({title:"",author:"",url:""}),a=Object(d.a)(n,2),c=a[0],s=a[1],i=function(e){s(Object(l.a)(Object(l.a)({},c),{},Object(u.a)({},e.target.name,e.target.value)))};return Object(k.jsxs)("div",{id:"newBlogDiv",children:[Object(k.jsx)("h2",{children:"Create new"}),Object(k.jsxs)("form",{id:"newBlogForm",className:"form",onSubmit:function(e){e.preventDefault(),t(c),s({title:"",author:"",url:""})},children:[Object(k.jsxs)("div",{className:"divInput",children:[Object(k.jsx)("label",{htmlFor:"title",children:"Title:"}),Object(k.jsx)("input",{id:"title",className:"title",value:c.title,type:"text",name:"title",onChange:i})]}),Object(k.jsxs)("div",{className:"divInput",children:[Object(k.jsx)("label",{htmlFor:"author",children:"Author:"}),Object(k.jsx)("input",{id:"author",value:c.author,type:"text",name:"author",onChange:i})]}),Object(k.jsxs)("div",{className:"divInput",children:[Object(k.jsx)("label",{htmlFor:"url",children:"Url:"}),Object(k.jsx)("input",{id:"url",value:c.url,type:"text",name:"url",onChange:i})]}),Object(k.jsx)("div",{className:"divNewBlogInput",children:Object(k.jsx)("button",{id:"createBlogButton",className:"greenButton",type:"submit",children:"Create"})})]})]})},N=function(e){var t=e.notification;return null===t?null:Object(k.jsx)("div",{className:t.type,children:t.message})},B=function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],c=n[1],s={display:a?"none":""},i={display:a?"":"none"},o=function(){c(!a)};return Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"toggleDiv",style:s,children:Object(k.jsx)("button",{className:"greenButton",onClick:o,children:e.buttonLabel})}),Object(k.jsxs)("div",{className:"toggleDiv",style:i,children:[e.children,Object(k.jsx)("button",{className:"redButton",onClick:o,children:"Cancel"})]})]})},C=function(e){var t=e.blog,n=e.addLikes,a=e.deleteBlog,c=e.userLoged,s=Object(r.useState)(!1),i=Object(d.a)(s,2),o=i[0],u=i[1],l={display:o?"":"none"},j=o?"hide":"view";return Object(k.jsxs)("div",{id:"blogDiv",className:"blogDiv",children:[Object(k.jsxs)("div",{id:"titleDiv",children:[Object(k.jsxs)("p",{children:[t.title," - ",t.author]}),Object(k.jsx)("button",{className:"greenButton",onClick:function(){u(!o)},children:j})]}),Object(k.jsxs)("div",{id:"showWhenVisible",style:l,children:[Object(k.jsx)("p",{children:t.url}),Object(k.jsx)("p",{children:t.likes}),Object(k.jsx)("button",{className:"blueButton",onClick:n,children:"like"}),Object(k.jsx)("p",{children:t.user.name}),t.user.name===c.name&&Object(k.jsx)("button",{className:"redButton",onClick:a,children:"remove"})]})]})},S=function(){return Object(k.jsxs)("form",{className:"form",children:[Object(k.jsxs)("div",{className:"divInput",children:[Object(k.jsx)("label",{htmlFor:"name",children:"Name:"}),Object(k.jsx)("input",{id:"name",type:"text",name:"name",placeholder:"Enter name"})]}),Object(k.jsxs)("div",{className:"divInput",children:[Object(k.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(k.jsx)("input",{id:"username",type:"text",name:"username",placeholder:"Enter username"})]}),Object(k.jsxs)("div",{className:"divInput",children:[Object(k.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(k.jsx)("input",{id:"password",type:"text",name:"password",placeholder:"Enter password"})]}),Object(k.jsx)("button",{className:"greenButton",children:"Registry"})]})},I=function(e){var t=e.onSubmit,n=e.onChange,r=e.userToLogin;return Object(k.jsxs)("form",{id:"logForm",className:"form",onSubmit:t,children:[Object(k.jsxs)("div",{className:"divInput",children:[Object(k.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(k.jsx)("input",{id:"username",type:"text",name:"username",placeholder:"Enter username",value:r.username,onChange:n})]}),Object(k.jsxs)("div",{className:"divInput",children:[Object(k.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(k.jsx)("input",{id:"password",type:"text",name:"password",placeholder:"Enter password",value:r.password,onChange:n})]}),Object(k.jsx)("div",{children:Object(k.jsx)("button",{className:"blueButton",type:"submit",children:"Login"})})]})},D=(n(45),function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)({username:"",password:""}),s=Object(d.a)(c,2),j=s[0],b=s[1],p=Object(r.useState)(null),h=Object(d.a)(p,2),m=h[0],O=h[1],x=Object(r.useState)(null),f=Object(d.a)(x,2),g=f[0],D=f[1],F=function(e,t){D({message:e,type:t}),setTimeout((function(){D(null)}),2e3)},E=function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,w.loginBlogs(Object(l.a)({},j));case 4:n=e.sent,window.localStorage.setItem("loggedBlogsappUser",JSON.stringify(n)),v.setToken(n.token),O(n),b({username:"",password:""}),F("".concat(n.name," logged"),"succes"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),F("Wrong credentials","error");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(o.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.create(t);case 3:r=e.sent,a(n.concat(r)),F("A new Blog ".concat(r.title," by ").concat(r.author," added"),"succes"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),F("Error","error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(o.a)(i.a.mark((function e(t){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(l.a)(Object(l.a)({},t),{},{likes:t.likes+1}),e.prev=1,e.next=4,v.update(t.id,r);case 4:c=e.sent,a(n.map((function(e){return e.id!==t.id?e:c}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),F("Error","error");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Delete the blog ".concat(t.title))){e.next=6;break}return e.next=4,v.remove(t.id);case 4:a(n.filter((function(e){return e.id!==t.id}))),F("Deleted ".concat(t.title),"succes");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){v.getAll().then((function(e){return a(e)}))}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogsappUser");if(e){var t=JSON.parse(e);O(t),v.setToken(t.token)}}),[]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(N,{notification:g}),m?Object(k.jsxs)("div",{id:"mainDiv",children:[Object(k.jsx)("h2",{children:"Blogs"}),Object(k.jsxs)("p",{children:[m.name," logged in",Object(k.jsx)("button",{className:"redButton",onClick:function(){window.localStorage.removeItem("loggedBlogsappUser"),O(null),F("".concat(m.name," logout"),"succes")},children:"logout"})]}),Object(k.jsx)(B,{buttonLabel:"create",children:Object(k.jsx)(y,{createBlog:L})}),n.map((function(e){return Object(k.jsx)(C,{blog:e,userLoged:m,addLikes:function(){return T(e)},deleteBlog:function(){return A(e)}},e.id)}))]}):Object(k.jsxs)("div",{className:"formDiv",children:[Object(k.jsx)(I,{onSubmit:E,userToLogin:j,onChange:function(e){b(Object(l.a)(Object(l.a)({},j),{},Object(u.a)({},e.target.name,e.target.value)))}}),Object(k.jsx)(B,{buttonLabel:"Registry",children:Object(k.jsx)(S,{})})]})]})});c.a.render(Object(k.jsx)(D,{}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.9f22c5ba.chunk.js.map