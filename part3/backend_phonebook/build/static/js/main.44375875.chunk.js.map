{"version":3,"sources":["services/phonebook.js","components/Filter.js","components/Form.js","components/Person.js","components/Book.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","bookService","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","deletePerson","delete","Filter","filter","handleFilterChange","type","placeholder","value","onChange","Form","onSubmit","handleInputChange","newPerson","name","number","Person","person","onClick","Book","persons","map","Notification","notification","className","message","App","useState","setPersons","setNewPerson","setFilter","setNotification","useEffect","console","log","notifyWith","setTimeout","length","personsToShow","p","toLowerCase","includes","event","target","preventDefault","personObject","existing","find","window","confirm","personReplaced","returnedPerson","catch","error","n","addedPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.44375875.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseUrl = '/api/persons'; //cambiar en produccion\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst deletePerson = (id) => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nconst bookService = {\n  getAll,\n  create,\n  update,\n  deletePerson,\n};\n\nexport default bookService;\n","import React from 'react';\n\nconst Filter = ({ filter, handleFilterChange }) => {\n  return (\n    <div>\n      <p>Filter shown with</p>\n      <input\n        type=\"text\"\n        placeholder=\"Enter name to search\"\n        value={filter}\n        onChange={handleFilterChange}\n      />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from 'react';\n\nconst Form = ({ onSubmit, handleInputChange, newPerson }) => {\n  return (\n    <form onSubmit={onSubmit}>\n      <div>\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Enter name\"\n          value={newPerson.name}\n          onChange={handleInputChange}\n        />\n      </div>\n      <div>\n        <input\n          type=\"tel\"\n          name=\"number\"\n          placeholder=\"Enter number\"\n          value={newPerson.number}\n          onChange={handleInputChange}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">Add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default Form;\n","import React from 'react';\n\nconst Person = ({ person, deletePerson }) => {\n  return (\n    <li>\n      {person.name} {person.number}{' '}\n      <button onClick={deletePerson}>Delete</button>{' '}\n    </li>\n  );\n};\n\nexport default Person;\n","import React from 'react';\nimport Person from './Person.js';\n\nconst Book = ({ persons, deletePerson }) => {\n  return (\n    <ul>\n      {persons.map((person) => (\n        <Person\n          key={person.name}\n          person={person}\n          deletePerson={() => deletePerson(person)}\n        />\n      ))}\n    </ul>\n  );\n};\n\nexport default Book;\n","import React from 'react';\nimport './index.css';\n\nconst Notification = ({ notification }) => {\n  if (notification === null) {\n    return null;\n  }\n\n  return <div className={notification.type}>{notification.message}</div>;\n};\n\nexport { Notification };\n","import React, { useState, useEffect } from 'react';\nimport bookService from './services/phonebook.js';\nimport Filter from './components/Filter.js';\nimport Form from './components/Form.js';\nimport Book from './components/Book.js';\nimport { Notification } from './components/Notification.js';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newPerson, setNewPerson] = useState({\n    name: '',\n    number: '',\n  });\n  const [filter, setFilter] = useState('');\n  const [notification, setNotification] = useState(null);\n\n  useEffect(() => {\n    console.log('effect');\n    bookService.getAll().then((data) => {\n      console.log('promise fulfilled');\n      setPersons(data);\n    });\n  }, []);\n\n  const notifyWith = (message, type) => {\n    setNotification({ message, type });\n    setTimeout(() => {\n      setNotification(null);\n    }, 2000);\n  };\n\n  const handleInputChange = (event) => {\n    setNewPerson({\n      ...newPerson,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value);\n  };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const personObject = {\n      name: newPerson.name,\n      number: newPerson.number,\n    };\n\n    const existing = persons.find(\n      (p) => p.name.toLowerCase() === personObject.name.toLowerCase()\n    );\n    if (existing) {\n      const ok = window.confirm(\n        `${existing.name} is already added to phonebook, replace the old number with a new one?`\n      );\n      if (ok) {\n        const personReplaced = { ...existing, number: personObject.number };\n        bookService\n          .update(personReplaced.id, personReplaced)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== returnedPerson.id ? person : returnedPerson\n              )\n            );\n            notifyWith(`Changed number of  ${existing.name}`, 'succes');\n            setNewPerson({\n              name: '',\n              number: '',\n            });\n          })\n          .catch((error) => {\n            notifyWith(\n              `Information of ${personReplaced.name} has already been removed from server`,\n              'error'\n            );\n            setPersons(persons.filter((n) => n.id !== personReplaced.id));\n          });\n      }\n    } else {\n      bookService\n        .create(personObject)\n        .then((addedPerson) => {\n          notifyWith(`Added ${personObject.name}`, 'succes');\n          setPersons(persons.concat(addedPerson));\n          setNewPerson({\n            name: '',\n            number: '',\n          });\n        })\n        .catch((error) => notifyWith(error.response.data.error, 'error'));\n    }\n  };\n\n  const deletePerson = (person) => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n      bookService\n        .deletePerson(person.id)\n        .then((response) => {\n          setPersons(persons.filter((n) => n.id !== person.id));\n          notifyWith(`Deleted ${person.name}`, 'succes');\n        })\n        .catch(() => {\n          setPersons(persons.filter((p) => p.id !== person.id));\n          notifyWith(`${person.name} has already been removed`, 'error');\n        });\n    }\n  };\n\n  console.log('render', persons.length, 'persons');\n\n  const personsToShow =\n    filter.length === 0\n      ? persons\n      : persons.filter((p) =>\n          p.name.toLowerCase().includes(filter.toLowerCase())\n        );\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notification={notification} />\n      <Filter filter={filter} handleFilterChange={handleFilterChange} />\n      <h2>Add a new</h2>\n      <Form\n        onSubmit={addPerson}\n        handleInputChange={handleInputChange}\n        newPerson={newPerson}\n      />\n      <h2>Numbers</h2>\n      <Book persons={personsToShow} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App.js';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}